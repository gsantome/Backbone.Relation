/**
 * Backbone.Relation.js 0.1.0
 * (c) 2014 Gonzalo Santom√© (https://github.com/gsantome/Backbone.Relation)
 *
 * Backbone.Relation may be freely distributed under the MIT license; see the accompanying LICENSE.txt.
 * For details and documentation: https://github.com/PaulUithol/Backbone-relational.
 * Depends on Backbone (and thus on Underscore as well): https://github.com/documentcloud/backbone.
 **/
(function(e,t){if(typeof define==="function"&&define.amd){define(["require","exports","backbone","underscore"],t)}else if(typeof exports!=="undefined"){t(require,exports,require("backbone"),require("underscore"))}else{t(e.require,e,e.Backbone,e._)}})(this,function(e,t,n,r){"use strict";n.Relation=n.Model.extend({relation:null,initialize:function(e,t){var n=this.relation;if(n&&e){if(r.isArray(n)){r(n).forEach(function(t){this.initializeStructure(e,t)},this)}else{this.initializeStructure(e,n)}}},parse:function(e){var t=this.relation;if(r.isArray(t)){r(t).forEach(function(t){this.initializeStructure(e,t)},this)}else{this.initializeStructure(e,t)}return e},initializeStructure:function(t,r){if(t[r.key]){var i=r.model||r.collection;if(!i){i=e(r.path)}if(!(t[r.key]instanceof n.Collection)&&!(t[r.key]instanceof n.Model)){var s=new i(t[r.key]);this.set(r.key,s);t[r.key]=s}}}})})